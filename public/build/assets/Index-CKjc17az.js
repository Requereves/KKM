import{a as N,r as n,b as v,j as e,H as y,L as w}from"./app-B4bMN2Eq.js";import{A as S}from"./AuthenticatedLayout-ClXdYjc_.js";import{t as _}from"./translations-DDsLtPwQ.js";/* empty css            */import"./Header-BTM4iWbk.js";function R({auth:b,students:l,filters:h}){const{locale:g}=N().props,s=_[g||"id"],[o,j]=n.useState(h?.search||""),[c,u]=n.useState(h?.major||"all"),[a,x]=n.useState(null),p=n.useRef(!0),f=l.data?Array.from(new Set(l.data.map(t=>t.major))):[];n.useEffect(()=>{if(p.current){p.current=!1;return}const t=setTimeout(()=>{v.get(route("admin.students.index"),{search:o,major:c},{preserveState:!0,preserveScroll:!0,replace:!0})},500);return()=>clearTimeout(t)},[o,c]);const k=()=>{if(!l.data||l.data.length===0){alert("No data available to export.");return}const d=[["Name","NIM","Major","Year","Email","Phone","Status","Skills"].join(","),...l.data.map(r=>[`"${(r.fullName||"").replace(/"/g,'""')}"`,`"${r.nim||""}"`,`"${r.major||""}"`,`"${r.yearOfEntry||""}"`,`"${r.email||""}"`,`"${r.phone||""}"`,`"${r.status||""}"`,`"${(r.skills||[]).join("; ")}"`].join(","))].join(`
`),m=new Blob([d],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(i.download!==void 0){const r=URL.createObjectURL(m);i.setAttribute("href",r),i.setAttribute("download",`students_export_${new Date().toISOString().slice(0,10)}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}};return e.jsxs(S,{user:b.user,children:[e.jsx(y,{title:s.students||"Students Data"}),e.jsxs("div",{className:"p-6 space-y-6 animate-in fade-in duration-500 font-sans",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:s.students}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:[s.total_students,": ",l.total]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:k,className:"px-4 py-2 bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-800 rounded-lg text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center gap-2",children:[e.jsx("span",{className:"material-icons-outlined text-lg",children:"download"}),"Export CSV"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx("span",{className:"material-icons-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),e.jsx("input",{type:"text",placeholder:s.search_student_placeholder||"Search...",className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-sm dark:text-white",value:o,onChange:t=>j(t.target.value)})]}),e.jsx("div",{children:e.jsxs("select",{className:"w-full px-4 py-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-sm dark:text-white",value:c,onChange:t=>u(t.target.value),children:[e.jsx("option",{value:"all",children:"Semua Jurusan / All Majors"}),f.map(t=>e.jsx("option",{value:t,children:t},t))]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-semibold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:s.student_col}),e.jsxs("th",{className:"px-6 py-4",children:[s.major," / ",s.year_entry]}),e.jsx("th",{className:"px-6 py-4",children:s.phone}),e.jsx("th",{className:"px-6 py-4",children:s.skills}),e.jsx("th",{className:"px-6 py-4 text-center",children:s.student_status}),e.jsx("th",{className:"px-6 py-4 text-right",children:s.action_col})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 text-sm",children:l.data&&l.data.length>0?l.data.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.avatar,alt:t.fullName,className:"w-8 h-8 rounded-full object-cover ring-2 ring-slate-100 dark:ring-slate-800",onError:d=>{d.target.src=`https://ui-avatars.com/api/?name=${t.fullName}&background=random`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:t.fullName}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:t.nim})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:t.major}),e.jsx("span",{className:"text-[10px] text-slate-500",children:t.yearOfEntry})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 font-mono text-xs",children:t.phone}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.skills&&t.skills.slice(0,2).map((d,m)=>e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",children:d},m)),t.skills&&t.skills.length>2&&e.jsxs("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium bg-slate-100 dark:bg-slate-800 text-slate-500",children:["+",t.skills.length-2]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${t.status==="active"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-500":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>x(t),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:e.jsx("span",{className:"material-icons-outlined text-lg",children:"visibility"})})})]},t.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"py-16 text-center",children:[e.jsx("span",{className:"material-icons-outlined text-5xl text-slate-200 dark:text-slate-800 mb-2",children:"school"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Tidak ada data mahasiswa ditemukan."})]})})})]})}),l.links&&l.links.length>3&&e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:l.from})," to ",e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:l.to})," of ",e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:l.total})," entries"]}),e.jsx("div",{className:"flex gap-1",children:l.links.map((t,d)=>e.jsx(w,{href:t.url||"#",preserveState:!0,preserveScroll:!0,dangerouslySetInnerHTML:{__html:t.label},className:`px-3 py-1.5 rounded text-xs font-medium transition-all ${t.active?"bg-indigo-600 text-white shadow-md":t.url?"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-100 border border-slate-200 dark:border-slate-700":"text-slate-400 cursor-not-allowed"}`},d))})]})]})]}),a&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-in fade-in duration-200",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>x(null)}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[90vh] animate-in slide-in-from-bottom-4 duration-300 ring-1 ring-slate-900/5 relative z-10",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-start bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:a.avatar,alt:a.fullName,className:"w-16 h-16 rounded-full border-2 border-white dark:border-slate-700 shadow-md object-cover",onError:t=>{t.target.src=`https://ui-avatars.com/api/?name=${a.fullName}&background=random`}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white leading-tight",children:a.fullName}),e.jsxs("div",{className:"flex flex-col mt-1 gap-1",children:[e.jsxs("p",{className:"text-sm font-mono text-indigo-600 dark:text-indigo-400 font-semibold tracking-wide",children:["NIM: ",a.nim]}),e.jsx("span",{className:`self-start px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${a.status==="active"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-500":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:a.status})]})]})]}),e.jsx("button",{onClick:()=>x(null),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-400 hover:text-slate-600 dark:hover:text-white transition-colors",children:e.jsx("span",{className:"material-icons-outlined",children:"close"})})]}),e.jsx("div",{className:"p-8 overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-icons-outlined text-sm",children:"badge"}),s.general_info]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 p-3 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("label",{className:"text-[10px] text-slate-400 uppercase font-bold block mb-1",children:s.major}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:a.major})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 p-3 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("label",{className:"text-[10px] text-slate-400 uppercase font-bold block mb-1",children:s.email_address}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:a.email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 p-3 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("label",{className:"text-[10px] text-slate-400 uppercase font-bold block mb-1",children:s.phone}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:a.phone})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 p-3 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsx("label",{className:"text-[10px] text-slate-400 uppercase font-bold block mb-1",children:s.year_entry}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:a.yearOfEntry})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-icons-outlined text-sm",children:"psychology"}),s.skills]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.skills&&a.skills.map((t,d)=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-900/30",children:t},d))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-icons-outlined text-sm",children:"info"}),"System Info"]}),e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-800/30 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-slate-200 dark:border-slate-700/50",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Registered"}),e.jsx("span",{className:"text-xs font-mono font-medium dark:text-slate-300",children:a.createdAt?a.createdAt.split(" ")[0]:"-"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Last Update"}),e.jsx("span",{className:"text-xs font-mono font-medium dark:text-slate-300",children:a.updatedAt?a.updatedAt.split(" ")[0]:"-"})]})]})]})]})]})})]})]})]})}export{R as default};
